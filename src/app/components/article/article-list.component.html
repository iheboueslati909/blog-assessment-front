<div class="articles">
  <div class="toolbar">
    <h2>Articles</h2>
    <button (click)="create()">New Article</button>
  </div>

  @if (loading) {
    <div>Loading...</div>
  }


  @if (error) {
    <div class="error">{{ error }}</div>
  }

  @if (!loading && !error) {
    @if (articles && articles.length > 0) {
      <ul>
        @for (a of articles; track a._id) {
          <li (click)="view(a)">
            <h3>{{ a.title || 'Untitled' }}</h3>
            <p class="meta">
              By {{ a.authorId || 'Unknown author' }} â€¢ 
              {{ (a.createdAt | date:'medium') || 'Unknown date' }}
            </p>
            @if (a.tags && a.tags.length > 0) {
              <div class="tags">
                @for (tag of a.tags; track tag) {
                  <span class="tag">{{ tag }}</span>
                }
              </div>
            }
            <p class="excerpt">
              {{ (a.content || '') | slice:0:150 }}
              {{ (a.content?.length || 0) > 150 ? '...' : '' }}
            </p>
          </li>
        }
      </ul>
    } @else {
      <p>No articles found.</p>
    }
  }
</div>