<div class="p-4">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-2xl font-semibold">Articles</h2>
    <button (click)="create()" class="inline-flex items-center px-3 py-1.5 btn-primary">New Article</button>
  </div>

  <div *ngIf="loading" class="text-gray-500">Loading...</div>

  <div *ngIf="error" class="text-red-600">{{ error }}</div>

  <ng-container *ngIf="!loading && !error">
    <ng-container *ngIf="articles && articles.length > 0; else noArticles">
      <ul class="space-y-3">
        <li *ngFor="let a of articles" (click)="view(a)" class="cursor-pointer p-4 border rounded-md hover:shadow hover:bg-white/5">
          <h3 class="text-lg font-medium text-white">{{ a.title || 'Untitled' }}</h3>
          <p class="text-sm text-gray-400">By {{ a.authorId || 'Unknown author' }} Â· {{ (a.createdAt | date:'medium') || 'Unknown date' }}</p>

          <div *ngIf="a.tags && a.tags.length > 0" class="mt-2 flex flex-wrap gap-2">
            <span *ngFor="let tag of a.tags" class="text-xs bg-gray-700 text-gray-200 px-2 py-0.5 rounded">{{ tag }}</span>
          </div>

          <p class="mt-3 text-gray-200">{{ (a.content || '') | slice:0:150 }}{{ (a.content.length || 0) > 150 ? '...' : '' }}</p>
        </li>
      </ul>
    </ng-container>

    <ng-template #noArticles>
      <p class="text-gray-400">No articles found.</p>
    </ng-template>
  </ng-container>
</div>